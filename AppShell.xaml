<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="FlockForge.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:FlockForge"
    xmlns:pages="clr-namespace:FlockForge.Views.Pages"
    xmlns:debug="clr-namespace:FlockForge.Pages"
    Title="FlockForge"
    FlyoutBehavior="Disabled">

    <!-- Authentication Routes (always accessible) -->
    <ShellContent
        x:Name="LoginPage"
        ContentTemplate="{DataTemplate pages:LoginPage}"
        Route="login" />
        
    <ShellContent
        x:Name="RegisterPage"
        ContentTemplate="{DataTemplate pages:RegisterPage}"
        Route="register" />
    
    <!-- Main Application Content (protected by authentication) -->
    <TabBar x:Name="MainTabBar" IsVisible="False">
        <Tab Title="Dashboard">
            <Tab.Icon>
                <FontImageSource Glyph="🏠" Size="24" />
            </Tab.Icon>
            <ShellContent
                Title="Home"
                ContentTemplate="{DataTemplate local:MainPage}"
                Route="dashboard" />
        </Tab>

        <Tab Title="Farms">
            <Tab.Icon>
                <FontImageSource Glyph="🌾" Size="24" />
            </Tab.Icon>
            <ShellContent
                Title="Farms"
                ContentTemplate="{DataTemplate pages:FarmsPage}"
                Route="farms" />
        </Tab>

        <Tab Title="Reports">
            <Tab.Icon>
                <FontImageSource Glyph="📊" Size="24" />
            </Tab.Icon>
            <ShellContent
                Title="Reports"
                ContentTemplate="{DataTemplate pages:ReportsPage}"
                Route="reports" />
        </Tab>
    </TabBar>

    <!-- Flyout menu for secondary items -->
    <FlyoutItem Title="Profile" Route="profile">
        <ShellContent ContentTemplate="{DataTemplate pages:ProfilePage}" />
    </FlyoutItem>

    <FlyoutItem Title="Settings" Route="settings">
        <ShellContent ContentTemplate="{DataTemplate pages:SettingsPage}" />
    </FlyoutItem>

    <!-- Hidden route for groups -->
    <ShellContent
        Title="Groups"
        ContentTemplate="{DataTemplate pages:GroupsPage}"
        Route="groups"
        IsVisible="False" />
    
    <!-- Debug-only content (can be toggled via IsVisible in code-behind if needed) -->
    <ShellContent
        x:Name="FontDiagnosticsPage"
        Title="Fonts"
        ContentTemplate="{DataTemplate debug:FontDiagnosticsPage}"
        Route="fontdiagnostics"
        IsVisible="False" />
</Shell>

